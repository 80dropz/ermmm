<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Your Key</title>
    <script src="https://publisher.linkvertise.com/cdn/linkvertise.js"></script>
    <style>
        body { background-color: #121212; color: #ffffff; font-family: Arial, sans-serif; margin: 0; padding: 20px; text-align: center; }
        h1 { color: #bb86fc; font-size: 24px; margin-bottom: 10px; }
        .terms { font-size: 14px; color: #a0a0a0; margin-bottom: 20px; }
        button { background-color: #bb86fc; color: #121212; border: none; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; transition: background-color 0.3s ease; margin-bottom: 20px; }
        button:hover { background-color: #9a67ea; }
        #key-display { margin-top: 20px; padding: 10px; background-color: #1e1e1e; border-radius: 5px; color: #ffffff; font-size: 18px; }
    </style>
    <script>
        // Encrypted keys (base64 encoded)
        const encodedKeys = [
            'a2V5MS1hYmMxMjM=', // key1-abc123
            'a2V5Mi1kZWY0NTY=', // key2-def456
            'a2V5My1naGk3ODk='  // key3-ghi789
        ];
        
        // Decode and shuffle keys
        let keys = encodedKeys.map(k => atob(k));
        keys.sort(() => Math.random() - 0.5);
        let usedKeys = JSON.parse(localStorage.getItem('usedKeys')) || [];

        function showKey() {
            const keyDisplay = document.getElementById("key-display");
            const urlParams = new URLSearchParams(window.location.search);
            
            if(urlParams.has('hash')) {
                // Get random available key
                const availableKeys = keys.filter(k => !usedKeys.includes(k));
                if(availableKeys.length > 0) {
                    const randomKey = availableKeys[Math.floor(Math.random() * availableKeys.length)];
                    usedKeys.push(randomKey);
                    localStorage.setItem('usedKeys', JSON.stringify(usedKeys));
                    keyDisplay.innerHTML = `Your key: <strong>${randomKey}</strong>`;
                    
                    // Clean URL without reload
                    history.replaceState({}, '', location.pathname);
                } else {
                    keyDisplay.innerHTML = "No more keys available!";
                }
            } else {
                keyDisplay.innerHTML = "Complete the offer to reveal your key";
            }
        }

        function initializeLinkvertise() {
            linkvertise(1196977, {
                onSuccess: () => {
                    window.location.href = `${location.origin}?hash=${btoa(Date.now())}`;
                },
                onFailure: () => {
                    console.log("Offer not completed");
                }
            });
        }

        // Initial load
        showKey();
        
        // Handle Linkvertise loading
        if(typeof linkvertise === 'function') {
            initializeLinkvertise();
        } else {
            let loadAttempts = 0;
            const loadInterval = setInterval(() => {
                if(typeof linkvertise === 'function') {
                    clearInterval(loadInterval);
                    initializeLinkvertise();
                } else if(loadAttempts++ > 10) {
                    clearInterval(loadInterval);
                    document.getElementById("key-display").innerHTML = "Please disable ad blockers";
                }
            }, 500);
        }
    </script>
</head>
<body>
    <h1>Complete the Linkvertise Offer to Get Your Key</h1>
    <div class="terms">
        By using this key you agree to our Terms of Service. Violating any of these rules will lead to a blocklist.<br>
        This key only works for you!
    </div>
    <button onclick="window.open('https://link-target.net/1196977/freerustrefined', '_blank')">
        Complete Offer
    </button>
    <div id="key-display"></div>
</body>
</html>
